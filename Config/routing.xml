<?xml version="1.0" encoding="UTF-8"?>
<routes xmlns="http://symfony.com/schema/routing"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://symfony.com/schema/routing
                            http://symfony.com/schema/routing/routing-1.0.xsd">

    <!-- Admin Configuration Routes -->
    <route id="cawlpayment.admin.configure" path="/admin/cawlpayment/configure" methods="POST">
        <default key="_controller">CawlPayment\Controller\Admin\ConfigurationController::saveAction</default>
    </route>

    <route id="cawlpayment.admin.test_connection" path="/admin/module/CawlPayment/test-connection" methods="POST">
        <default key="_controller">CawlPayment\Controller\Admin\ConfigurationController::testConnectionAction</default>
    </route>

    <!-- Admin API to get available payment products -->
    <route id="cawlpayment.admin.payment_products" path="/admin/module/CawlPayment/payment-products" methods="GET">
        <default key="_controller">CawlPayment\Controller\Admin\ConfigurationController::paymentProductsAction</default>
    </route>

    <!-- Admin API Test Routes -->
    <route id="cawlpayment.admin.test_dashboard" path="/admin/cawlpayment/api-test" methods="GET">
        <default key="_controller">CawlPayment\Controller\Admin\TestController::dashboardAction</default>
    </route>

    <route id="cawlpayment.admin.api_test_connection" path="/admin/cawlpayment/api-test/connection" methods="POST">
        <default key="_controller">CawlPayment\Controller\Admin\TestController::testConnectionAction</default>
    </route>

    <route id="cawlpayment.admin.api_test_config" path="/admin/cawlpayment/api-test/config" methods="GET">
        <default key="_controller">CawlPayment\Controller\Admin\TestController::configurationAction</default>
    </route>

    <route id="cawlpayment.admin.api_test_products" path="/admin/cawlpayment/api-test/products" methods="GET">
        <default key="_controller">CawlPayment\Controller\Admin\TestController::paymentProductsAction</default>
    </route>

    <route id="cawlpayment.admin.api_test_create_checkout" path="/admin/cawlpayment/api-test/create-checkout" methods="POST">
        <default key="_controller">CawlPayment\Controller\Admin\TestController::createTestCheckoutAction</default>
    </route>

    <route id="cawlpayment.admin.api_test_checkout_status" path="/admin/cawlpayment/api-test/checkout-status/{hostedCheckoutId}" methods="GET">
        <default key="_controller">CawlPayment\Controller\Admin\TestController::checkoutStatusAction</default>
        <requirement key="hostedCheckoutId">[a-zA-Z0-9_-]+</requirement>
    </route>

    <route id="cawlpayment.admin.api_test_payment_status" path="/admin/cawlpayment/api-test/payment-status/{paymentId}" methods="GET">
        <default key="_controller">CawlPayment\Controller\Admin\TestController::paymentStatusAction</default>
        <requirement key="paymentId">[a-zA-Z0-9_-]+</requirement>
    </route>

    <route id="cawlpayment.admin.api_test_return" path="/admin/cawlpayment/test-return" methods="GET">
        <default key="_controller">CawlPayment\Controller\Admin\TestController::testReturnAction</default>
    </route>

    <!-- Frontend Payment Routes -->
    <route id="cawlpayment.front.pay" path="/cawlpayment/pay/{orderId}/{methodCode}" methods="GET|POST">
        <default key="_controller">CawlPayment\Controller\Front\PaymentController::payAction</default>
        <requirement key="orderId">\d+</requirement>
        <requirement key="methodCode">[a-z0-9_]+</requirement>
    </route>

    <route id="cawlpayment.front.success" path="/cawlpayment/success" methods="GET">
        <default key="_controller">CawlPayment\Controller\Front\PaymentController::successAction</default>
    </route>

    <route id="cawlpayment.front.failure" path="/cawlpayment/failure" methods="GET">
        <default key="_controller">CawlPayment\Controller\Front\PaymentController::failureAction</default>
    </route>

    <route id="cawlpayment.front.cancel" path="/cawlpayment/cancel" methods="GET">
        <default key="_controller">CawlPayment\Controller\Front\PaymentController::cancelAction</default>
    </route>

    <!-- Webhook Route (no CSRF protection) -->
    <route id="cawlpayment.webhook" path="/cawlpayment/webhook" methods="POST">
        <default key="_controller">CawlPayment\Controller\Front\WebhookController::handleAction</default>
    </route>

    <!-- Get payment status (AJAX) -->
    <route id="cawlpayment.front.status" path="/cawlpayment/status/{hostedCheckoutId}" methods="GET">
        <default key="_controller">CawlPayment\Controller\Front\PaymentController::statusAction</default>
        <requirement key="hostedCheckoutId">[a-zA-Z0-9_-]+</requirement>
    </route>

    <!-- Payment method icons -->
    <route id="cawlpayment.front.icon" path="/cawlpayment/icon/{filename}" methods="GET">
        <default key="_controller">CawlPayment\Controller\Front\AssetController::iconAction</default>
        <requirement key="filename">[a-zA-Z0-9_.-]+</requirement>
    </route>

</routes>
